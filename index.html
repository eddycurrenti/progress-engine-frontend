<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Tejas ki Webiste</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Sirin+Stencil&display=swap" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>
*{
    margin:0;
    padding:0;
    box-sizing:border-box;
    
  font-family: "Sirin Stencil", sans-serif;
  font-weight: 400;
  font-style: normal

}

/* ===== DEEP PREMIUM OLED BLACK BACKGROUND ===== */

body{
    min-height:100vh;
    color:white;
    overflow-x:hidden;
    background:
        radial-gradient(circle at 15% 20%, rgba(255,255,255,0.04), transparent 40%),
        radial-gradient(circle at 85% 80%, rgba(255,255,255,0.03), transparent 50%),
        linear-gradient(180deg, #050505 0%, #000000 100%);
    position:relative;
}

/* subtle center glow for depth */
body::after{
    content:"";
    position:fixed;
    inset:0;
    background:
        radial-gradient(circle at center,
            rgba(255,255,255,0.02) 0%,
            transparent 60%);
    pointer-events:none;
    z-index:-1;
}


.cursor-dot{
    position:fixed;
    top:0;
    left:0;
    pointer-events:none;
    border-radius:50%;
    transform:translate(-50%,-50%);
    width:6px;
    height:6px;
    background:#60a5fa;
    box-shadow:0 0 12px rgba(96,165,250,0.8);
    z-index:10000; /* stays above glass */
    will-change:transform;
}

.cursor-outline{
    position:fixed;
    top:0;
    left:0;
    pointer-events:none;
    border-radius:50%;
    transform:translate(-50%,-50%);
    width:32px;
    height:32px;
    border:1.8px solid rgba(96,165,250,0.8);
    box-shadow:
        0 0 18px rgba(96,165,250,0.6),
        0 0 35px rgba(96,165,250,0.3);
    transition:
        transform .25s cubic-bezier(.19,1,.22,1),
        background .2s ease;
    z-index:5; /* BELOW .section (50) */
    will-change:transform;
}


/* ================= PARTICLES ================= */

#particles{
    position:fixed;
    top:0;
    left:0;
    width:100%;
    height:100%;
    z-index:-3;
    pointer-events:none;
}

/* ================= STRONG PARALLAX PIXEL BACKGROUND ================= */

/* ================= LAYOUT ================= */

.container{
    max-width:1200px;
    margin:auto;
    padding:40px 200px 40px 20px; /* space for stats panel */
}


h1{
    text-align:center;
    margin-bottom:60px;
    font-size:42px;
    font-weight:700;
    letter-spacing:1.5px;

    /* Gradient text */
    background: linear-gradient(
        180deg,
        #ffffff 0%,
        #d1d5db 40%,
        #9ca3af 100%
    );
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;

    position: relative;
    opacity:0;
    transform:translateY(-30px);
    animation: titleDrop 0.8s cubic-bezier(.19,1,.22,1) forwards;
    animation-delay:0.4s;
}

/* Soft glow behind text */
h1::after{
    content: "My Personal Utility Dashboard";
    position: absolute;
    left: 50%;
    transform: translateX(-50%);
    top: 0;
    z-index: -1;

    background: linear-gradient(
        180deg,
        rgba(59,130,246,0.6),
        rgba(59,130,246,0.2)
    );
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;

    filter: blur(18px);
    opacity: 0.6;
}


.grid{
    display:grid;
    gap:30px;
}

@media(min-width:900px){
    .grid{
        grid-template-columns:1fr 1fr;
    }
}


.section{
     position:relative;
    z-index:50;
    background:rgba(30,41,59,0.9);
    backdrop-filter:blur(10px);
    padding:30px;
    border-radius:18px;
    box-shadow:0 15px 35px rgba(0,0,0,0.4);
    display:flex;
    flex-direction:column;
    gap:18px;
}

.section::before{
    content:"";
    position:absolute;
    inset:0;
    border-radius:18px;
    background:linear-gradient(
        120deg,
        rgba(255,255,255,0.06),
        transparent 40%
    );
    pointer-events:none;
}

h2{
    font-weight:500;
    padding-bottom:12px;
    border-bottom:1px solid rgba(255,255,255,0.08);
}

/* ================= INPUTS ================= */

.input-row{
    display:flex;
    gap:15px;
    flex-wrap:wrap;
}

#subjects{
    display:flex;
    flex-direction:column;
    gap:15px;
}

input, select{
    flex:1;
    min-width:120px;
    padding:14px;
    border-radius:12px;
    border:none;
    background:#334155;
    color:white;
    outline:none;
}

/* ================= BLACK BUTTON WITH GLOW ================= */

.btn{
    padding:14px 18px;
    border:none;
    color:#fff;
    cursor:pointer;
    position:relative;
    z-index:0;
    border-radius:12px;
    font-weight:500;
    background:#000;
}

.btn::after{
    content:"";
    position:absolute;
    inset:0;
    background:#000;
    border-radius:12px;
    z-index:-1;
}

.btn::before{
    content:"";
    position:absolute;
    top:-2px;
    left:-2px;
    width:calc(100% + 4px);
    height:calc(100% + 4px);
    border-radius:12px;
    background:linear-gradient(
        45deg,
        #2563eb,
        #3b82f6,
        #60a5fa,
        #2563eb
    );
    background-size:400%;
    filter:blur(8px);
    z-index:-2;
    opacity:0;
    transition:opacity .3s ease-in-out;
    animation:glowing 12s linear infinite;
}

@keyframes glowing{
    0%{background-position:0 0;}
    50%{background-position:400% 0;}
    100%{background-position:0 0;}
}

.btn:hover::before{
    opacity:1;
}

.btn:active{
    transform:scale(0.97);
}

.full-btn{
    width:100%;
}

.delete-btn{
    background:#dc2626;
}

.task{
    display:flex;
    align-items:center;
    justify-content:space-between;
    background:#334155;
    padding:14px 16px;
    border-radius:16px;
    margin-top:12px;
    gap:12px;
    transition:all .25s ease;
}

.task:hover{
    background:#3b4a63;
}

.task-left{
    display:flex;
    align-items:center;
    gap:12px;
    flex:1;
    min-width:0;
}

.task-left span{
    font-size:15px;
    color:#e2e8f0;
    word-break:break-word;
}

.task input[type="checkbox"]{
    width:18px;
    height:18px;
    accent-color:#60a5fa;
    cursor:pointer;
}

.delete-btn{
    background:transparent;
    border:1px solid rgba(255,255,255,0.15);
    padding:6px 12px;
    font-size:13px;
    border-radius:10px;
    transition:all .2s ease;
}

.delete-btn:hover{
    background:#dc2626;
    border-color:#dc2626;
}

img{
    margin-top:10px;
    max-width:100%;
    border-radius:12px;
}

/* ================= RESULT ================= */

.result{
    font-size:18px;
    font-weight:600;
    color:#60a5fa;
}

/* ================= FOOTER ================= */

.footer{
    text-align:center;
    padding:30px 10px;
    margin-top:50px;
    border-top:1px solid rgba(255,255,255,0.1);
    font-size:14px;
    color:#94a3b8;
}

/* ================= RESPONSIVE ================= */

@media(max-width:600px){
    .container{padding:25px 15px;}
    .section{padding:20px;}
    .input-row{flex-direction:column;}
    .btn{width:100%;}
}

/* ================= PREMIUM LOAD ANIMATION ================= */

body{
    animation: pageFade 0.98s ease forwards;
    opacity:0;
}

@keyframes pageFade{
    to{
        opacity:1;
    }
}

/* Container subtle zoom */
.container{
    transform:scale(0.96);
    opacity:0;
    animation: containerPop 0.9s cubic-bezier(.19,1,.22,1) forwards;
    animation-delay:0.2s;
}

@keyframes containerPop{
    to{
        transform:scale(1);
        opacity:1;
    }
}

/* Heading slide down */

@keyframes titleDrop{
    to{
        opacity:1;
        transform:translateY(0);
    }
}

/* Sections stagger animation */
.section{
    opacity:0;
    transform:translateY(40px) scale(0.98);
    animation: sectionReveal 0.8s cubic-bezier(.19,1,.22,1) forwards;
}

.section:nth-child(1){ animation-delay:0.6s; }
.section:nth-child(2){ animation-delay:0.75s; }
.section:nth-child(3){ animation-delay:0.9s; }
.section:nth-child(4){ animation-delay:1s; }

@keyframes sectionReveal{
    to{
        opacity:1;
        transform:translateY(0) scale(1);
    }
}

/* Buttons slight pop */
.btn{
    transition:transform .25s ease, box-shadow .3s ease;
}

.btn:hover{
    transform:translateY(-2px);
    box-shadow:0 12px 25px rgba(0,0,0,0.35);
}

/* Inputs smooth fade */
input, select{
    opacity:0;
    transform:translateY(15px);
    animation: inputFade 0.7s ease forwards;
    animation-delay:1.2s;
}

/* ================= RIGHT SIDE STATS ================= */

.stats-panel{
    position:fixed;
    right:40px;
    top:50%;
    transform:translateY(-50%);
    display:flex;
    flex-direction:column;
    gap:40px;
    z-index:40;
}

.stat-item{
    display:flex;
    align-items:center;
    gap:20px;
}

.stat-circle{
    width:100px;
    height:100px;
    border-radius:50%;
    border:6px solid;
    display:flex;
    align-items:center;
    justify-content:center;
    font-size:24px;
    font-weight:600;
    background:rgba(30,41,59,0.9);
}


.stat-easy{ border-color:#22c55e; }
.stat-medium{ border-color:#f59e0b; }
.stat-hard{ border-color:#ef4444; }

.stat-text{
    display:flex;
    flex-direction:column;
    gap:4px;
}

.stat-text span:first-child{
    font-size:18px;
}

.stat-text span:last-child{
    font-size:13px;
    color:#94a3b8;
}

/* Hide on small screens */
@media(max-width:1000px){
    .stats-panel{
        display:none;
    }
}


@keyframes inputFade{
    to{
        opacity:1;
        transform:translateY(0);
    }
}

/* Footer fade */
.footer{
    opacity:0;
    transform:translateY(20px);
    animation: footerReveal 1s ease forwards;
    animation-delay:1.3s;
}

@keyframes footerReveal{
    to{
        opacity:1;
        transform:translateY(0);
    }
}
@media (max-width: 768px){
    body{
        cursor:auto;
    }

    .cursor-dot,
    .cursor-outline{
        display:none !important;
    }
}
@media(max-width:600px){
    .task{
        flex-direction:column;
        align-items:flex-start;
    }

    .delete-btn{
        align-self:flex-end;
    }
}

/* ================= PROFILE CARD ================= */

.profile-card{
    background:rgba(30,41,59,0.95);
    padding:20px;
    border-radius:18px;
    display:flex;
    flex-direction:column;
    gap:8px;
    border:1px solid rgba(255,255,255,0.08);
    box-shadow:0 15px 35px rgba(0,0,0,0.4);
}

.profile-name{
    font-size:16px;
    font-weight:600;
}

.profile-email{
    font-size:12px;
    color:#94a3b8;
    margin-bottom:10px;
}

.logout-mini{
    background:#111;
    border:none;
    padding:8px 14px;
    border-radius:10px;
    color:white;
    cursor:pointer;
    font-size:12px;
    transition:0.2s ease;
}

.logout-mini:hover{
    background:#dc2626;
}


/* Profile header row */

.profile-header{
    display:flex;
    align-items:center;
    gap:10px;
    margin-bottom:12px;
}

.profile-avatar{
    width:36px;
    height:36px;
    border-radius:50%;

    background:#1f2937; /* flat dark circle */
    border:1px solid rgba(255,255,255,0.08);

    display:flex;
    align-items:center;
    justify-content:center;

    font-size:14px;
    font-weight:600;
    color:#e5e7eb;
}

/* Slightly cleaner name */
.profile-name{
    font-size:18px;
    font-weight:600;
}

</style>
</head>

<body>

<!-- Custom Cursor Elements -->
<div class="cursor-dot"></div>
<div class="cursor-outline"></div>
<canvas id="particles"></canvas>

<div class="container">
    <div>
<h1>My Personal Utility Dashboard</h1>

    </div>


<div class="grid">

<div class="section">
<h2>To-Do List</h2>
<div class="input-row">
<input type="text" id="taskTitle" placeholder="Enter task">
<button class="btn" onclick="addTask()">Add Task</button>
</div>
<div id="taskList"></div>
</div>

<div class="section">
<h2>QR Generator</h2>
<div class="input-row">
<input type="text" id="qrInput" placeholder="Paste URL here">
<button class="btn" onclick="generateQR()">Generate</button>
</div>
<img id="qrImage">
</div>

<div class="section">
<h2>GPA Calculator</h2>
<div id="subjects"></div>
<button class="btn full-btn" onclick="addSubject()">Add Subject</button>
<button class="btn full-btn" onclick="calculateGPA()">Calculate GPA</button>
<div id="gpaResult" class="result"></div>
</div>

<div class="section">
<h2>CGPA Calculator</h2>
<div class="input-row">
<input type="number" id="oldCredits" placeholder="Old Credits">
<input type="number" id="oldCGPA" placeholder="Old CGPA">
</div>
<div class="input-row">
<input type="number" id="newCredits" placeholder="New Credits">
<input type="number" id="newCGPA" placeholder="New GPA">
</div>
<button class="btn full-btn" onclick="calculateCGPA()">Calculate CGPA</button>
<div id="cgpaResult" class="result"></div>
</div>

</div>

</div>

<div class="stats-panel">

    <!-- USER INFO -->
    <div class="profile-card">
        <div class="profile-header">
    <div class="profile-avatar" id="profileAvatar"></div>
    <div class="profile-name" id="profileName"></div>
</div>

        <button class="logout-mini" onclick="logout()">Logout</button>
        <button class="btn" onclick="goToLeetCode()">GoTOLeetCode</button>
        
        <button class="btn" onclick="goToProjects()">My Projects</button>

    </div>

    <!-- EASY -->
    <div class="stat-item">
        <div class="stat-circle stat-easy" id="easyCount">0</div>
        <div class="stat-text">
            <span>Easy</span>
            <span>Solved</span>
        </div>
    </div>

    <!-- MEDIUM -->
    <div class="stat-item">
        <div class="stat-circle stat-medium" id="mediumCount">0</div>
        <div class="stat-text">
            <span>Medium</span>
            <span>Solved</span>
        </div>
    </div>

    <!-- HARD -->
    <div class="stat-item">
        <div class="stat-circle stat-hard" id="hardCount">0</div>
        <div class="stat-text">
            <span>Hard</span>
            <span>Solved</span>
        </div>
    </div>
    
</div>
<div class="footer">
    <div><strong>Patil Tejas Ashok</strong></div>
    <div>reso49@gmail.com</div>
</div>


<script>
const BASE = "http://localhost:3000";
if (!localStorage.getItem("token")) {
    window.location.href = "/login.html";
}


const gradeMap={
"S":10,"A":9,"B":8,"C":7,"D":6,"E":5,"F":0
};

/* ================= TASK ================= */
async function authFetch(url, options = {}) {

    const token = localStorage.getItem("token");

    if (!token) {
        window.location.href = "/login.html";
        return;
    }

    options.headers = {
        ...(options.headers || {}),
        "Authorization": "Bearer " + token
    };

    const res = await fetch(url, options);

    if (res.status === 401) {
        localStorage.removeItem("token");
        window.location.href = "/login.html";
        return;
    }

    return res;
}

async function loadUser() {
    try {
        const res = await fetch(`${BASE}/signin/getUser`, {
            method: "GET",
            headers: {
                "Authorization": "Bearer " + localStorage.getItem("token")
            }
        });

        if (!res.ok) {
            console.log("Failed to load user");
            return;
        }

        const name = await res.text();   // â† IMPORTANT (not res.json())

        document.getElementById("profileName").innerText = name;

    } catch (err) {
        console.log("Error loading user:", err);
    }
}

loadUser();


async function loadStats() {
    try {
        const res = await fetch(`${BASE}/leetcode/user`, {
            headers: {
                "Authorization": "Bearer " + localStorage.getItem("token")
            }
        });

        if (!res.ok) {
            console.log("Failed to fetch stats");
            return;
        }

        const data = await res.json();

        let easy = 0;
        let medium = 0;
        let hard = 0;

        data.forEach(q => {
            if (q.level === "Easy") easy++;
            if (q.level === "Medium") medium++;
            if (q.level === "Hard") hard++;
        });

        document.getElementById("easyCount").innerText = easy;
        document.getElementById("mediumCount").innerText = medium;
        document.getElementById("hardCount").innerText = hard;

    } catch (err) {
        console.log("Error:", err);
    }
}


async function loadTasks(){
    const res=await authFetch(`${BASE}/todo/getAllTask`);
    const data=await res.json();
    const list=document.getElementById("taskList");
    list.innerHTML="";
    data.forEach(task=>{
        const div=document.createElement("div");
        div.className="task";
        div.innerHTML=`
            <div class="task-left">
            <span>${task.title}</span>
            </div>
            <button class="delete-btn" onclick="deleteTask('${task._id}')">Delete</button>
        `;
        list.appendChild(div);
    });
}
function logout() {
    localStorage.removeItem("token");
    window.location.href = "/login.html";
}


async function addTask(){
    const title=document.getElementById("taskTitle").value;
    if(!title)return;
    await authFetch(`${BASE}/todo/taskCreate`,{
        method:"POST",
        headers:{"Content-Type":"application/json"},
        body:JSON.stringify({title,createTime:new Date().toLocaleString()})
    });
    document.getElementById("taskTitle").value="";
    loadTasks();
    
}

async function deleteTask(id){
    await authFetch(`${BASE}/todo/deleteTask`,{
        method:"DELETE",
        headers:{"Content-Type":"application/json"},
        body:JSON.stringify({id})
    });
    loadTasks();
}

loadTasks();


/* ================= QR ================= */

async function generateQR(){
    const URL=document.getElementById("qrInput").value;
    if(!URL)return;
    const res=await authFetch(`${BASE}/qr/getUrl`,{
        method:"POST",
        headers:{"Content-Type":"application/json"},
        body:JSON.stringify({URL})
    });
    const data=await res.text();
    document.getElementById("qrImage").src=data;
}

/* ================= GPA ================= */

function addSubject(){
    const div=document.createElement("div");
    div.className="input-row";
    div.innerHTML=`
        <select>
            <option value="">Grade</option>
            <option>S</option>
            <option>A</option>
            <option>B</option>
            <option>C</option>
            <option>D</option>
            <option>E</option>
            <option>F</option>
        </select>
        <input type="number" placeholder="Credit" min="1" max="4">
    `;
    document.getElementById("subjects").appendChild(div);
}

async function calculateGPA(){
    const rows=document.querySelectorAll("#subjects .input-row");
    let subjects=[];
    rows.forEach(row=>{
        const grade=row.querySelector("select").value;
        const credit=Number(row.querySelector("input").value);
        if(grade && credit){
            subjects.push({grade:gradeMap[grade],credit});
        }
    });

    const res=await authFetch(`${BASE}/gpa1/gpa2`,{
        method:"POST",
        headers:{"Content-Type":"application/json"},
        body:JSON.stringify({subjects})
    });

    const gpa=await res.text();
    animateNumber("gpaResult",parseFloat(gpa),"GPA: ");
}

async function calculateCGPA(){
    const oldCredits=Number(document.getElementById("oldCredits").value);
    const oldCGPA=Number(document.getElementById("oldCGPA").value);
    const newCredits=Number(document.getElementById("newCredits").value);
    const newCgpa=Number(document.getElementById("newCGPA").value);

    const res=await authFetch(`${BASE}/cgpa1/cgpa2`,{
        method:"POST",
        headers:{"Content-Type":"application/json"},
        body:JSON.stringify({oldCredits,oldCGPA,newCredits,newCgpa})
    });

    const cgpa=await res.text();
    animateNumber("cgpaResult",parseFloat(cgpa),"CGPA: ");
}

function animateNumber(elementId,target,prefix){
    const element=document.getElementById(elementId);
    let current=0;
    const duration=800;
    const stepTime=20;
    const steps=duration/stepTime;
    const increment=target/steps;

    const counter=setInterval(()=>{
        current+=increment;
        if(current>=target){
            current=target;
            clearInterval(counter);
        }
        element.innerText=prefix+current.toFixed(2);
    },stepTime);
}

/* ================= PARTICLES ================= */

const canvas=document.getElementById("particles");
const ctx=canvas.getContext("2d");
let particles=[];
let mouse={x:null,y:null};

function resizeCanvas(){
    canvas.width=window.innerWidth;
    canvas.height=window.innerHeight;
}
resizeCanvas();
window.addEventListener("resize",resizeCanvas);

window.addEventListener("mousemove",(e)=>{
    mouse.x=e.x;
    mouse.y=e.y;
});

class Particle{
    constructor(){
        this.x=Math.random()*canvas.width;
        this.y=Math.random()*canvas.height;
        this.size=Math.random()*2+1;
        this.speedX=(Math.random()-0.5)*0.5;
        this.speedY=(Math.random()-0.5)*0.5;
    }
    update(){
        this.x+=this.speedX;
        this.y+=this.speedY;
        const dx=mouse.x-this.x;
        const dy=mouse.y-this.y;
        const distance=Math.sqrt(dx*dx+dy*dy);
        if(distance<120){
            this.x-=dx/25;
            this.y-=dy/25;
        }
        if(this.x<0||this.x>canvas.width)this.speedX*=-1;
        if(this.y<0||this.y>canvas.height)this.speedY*=-1;
    }
    draw(){
        ctx.fillStyle="rgba(96,165,250,0.5)";
        ctx.beginPath();
        ctx.arc(this.x,this.y,this.size,0,Math.PI*2);
        ctx.fill();
    }
}

function initParticles(){
    for(let i=0;i<100;i++){
        particles.push(new Particle());
    }
}

function goToLeetCode() {
    window.location.href = "/leetcode.html";
}

function goToProjects() {
    window.location.href = "/project.html";
}

function animateParticles(){
    ctx.clearRect(0,0,canvas.width,canvas.height);
    particles.forEach(p=>{
        p.update();
        p.draw();
    });
    requestAnimationFrame(animateParticles);
}

initParticles();
animateParticles();

/* ================= CUSTOM CURSOR SCRIPT ================= */

const cursorDot = document.querySelector(".cursor-dot");
const cursorOutline = document.querySelector(".cursor-outline");

let mouseX = window.innerWidth / 2;
let mouseY = window.innerHeight / 2;

let dotX = mouseX;
let dotY = mouseY;

let outlineX = mouseX;
let outlineY = mouseY;

window.addEventListener("mousemove",(e)=>{
    mouseX = e.clientX;
    mouseY = e.clientY;
});

/* smooth animation loop */

function animateCursor(){

    // Dot (faster follow)
    dotX += (mouseX - dotX) * 0.35;
    dotY += (mouseY - dotY) * 0.35;

    // Outline (slower premium lag)
    outlineX += (mouseX - outlineX) * 0.12;
    outlineY += (mouseY - outlineY) * 0.12;

    cursorDot.style.left = dotX + "px";
    cursorDot.style.top = dotY + "px";

    cursorOutline.style.left = outlineX + "px";
    cursorOutline.style.top = outlineY + "px";

    requestAnimationFrame(animateCursor);
}

animateCursor();

/* Hover interactions */

const hoverElements = document.querySelectorAll("button, input, select");

hoverElements.forEach(el=>{
    el.addEventListener("mouseenter",()=>{
        cursorOutline.classList.add("cursor-hover");
    });
    el.addEventListener("mouseleave",()=>{
        cursorOutline.classList.remove("cursor-hover");
    });
});



function renderChart(easy, medium, hard) {

    const ctx = document.getElementById("difficultyChart");

    new Chart(ctx, {
        type: "doughnut",
        data: {
            labels: ["Easy", "Medium", "Hard"],
            datasets: [{
                data: [easy, medium, hard],
                backgroundColor: [
                    "#22c55e",
                    "#f59e0b",
                    "#ef4444"
                ],
                borderWidth: 0
            }]
        },
        options: {
            responsive: true,
            plugins: {
                legend: {
                    labels: {
                        color: "#e2e8f0",
                        font: { size: 14 }
                    }
                }
            },
            cutout: "70%"
        }
    });
}
window.onload = loadStats;
</script>

</body>
</html>
